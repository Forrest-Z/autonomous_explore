# Introduction to explore&search module
> 启动方法见最后面。
> 友情提示：探索模块工作的前提是：感知模块发出准可通行区域地图和车辆全局定位位置 + 控制模块正常启动


# 切换全局坐标系/局部坐标系下的路径规划
## 切换路径规划所用的坐标系：在全局坐标系/局部坐标系下
只需要在以下文件的开头注释或取消注释 **#define PLAN_IN_LOCAL_MAP** 并重新编译即可。
astar_planner/include/astar_util.h
并在astar_action.launch文件中将re_planner_map_topic_name值赋值为/global_map，局部规划时该值为/local_map
## 切换（规划出的）路径所在的坐标系：在全局坐标系/局部坐标系下
需要在以下文件的开头注释或取消注释 **#define CONTROL_LOCAL_PATH** 并重新编译即可。
astar_planner/include/astar_util.h


# 启动
有全体启动和单模块启动两种方式，目前测试阶段推荐单独启动，方便查看调试信息。
## 全体启动


## 单独启动
1. 探索地图模块执行：roslaunch explore_large_map large_map.launch
2. 探索决策模块执行：roslaunch autonomous_exploration explore_action.launch
3. 路径规划模块执行：roslaunch astar_planner astar_action.launch

## 注意
1. 重新启动explore_large_map后，也需要重新启动ros_autonomous_exploraion，为了更新车辆位姿
2. 若车辆搜索起始点不在地图中心，需要注意！目前是默认为在地图中心

## 下一步提升方向
1. 目前目标点未考虑方向，是为了提高搜索速度。实际上应该考虑。
2. explore_large_map : 后期还是应该利用子地图进行拼接，目前是为了降级使用子地图，才使用局部地图进行拼接


## 感知存在问题：
1. 自由区域不联通带来的问题（即未知区域和自由区域傻傻分不清）：
1）上桢子地图得到的障碍物，本桢障碍物位置处于未知状态，则障碍物信息会继续保留，实际上应该没有。
2） 由于提供的未知区域也不联通，无法获取边缘区域(自由区域和未知区域的边界处)

* 若全部视为自由区域，后果则是潜在的未知区域会将本应该有的障碍物更新消失，则是不允许的，对路径规划是误导！
* 另外车辆定位的抖动也会造成全局地图更新错误，因为目前是拼接车身局部地图，选择车身局部地图拼接的原因是因为可以做raytracing处理(选择子地图可以做raytracing吗？)
对策： 降级使用，视为单线激光雷达使用，只保留最近障碍物信息，稍后即使有障碍物，也视为未知区域（装作看不见,注意，但是不会影响大地图更新效果；todo: 保留障碍物吗，进行不完全的raytrace？）
	进行raytracing后，其他区域则要么为自由区域，要么为未知区域。然后拼接成大地图，进行bayesian更新，此时只有障碍物和自由区域可以更新。

## 相机存在的问题：
1. 右方和后方无相机：
	极易陷入某些局部情况，因为安装缺乏视角，即使到达指定目标点，但是无信息增益，则下次还会到达该目标点。
	对策： 到达该目标点时，考虑信息增益？ 即考虑目标点的航向。

## 车辆存在的问题：
1. 无换档机构，需要人工换档。

